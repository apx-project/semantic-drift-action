name: 'APX Semantic Drift'
description: 'Implements Law #1 of Evolvable Software by tagging pull requests with semantic drift findings from APX.'
author: 'apx-project'
branding:
  icon: 'activity'
  color: 'purple'

inputs:
  github-token:
    description: 'GitHub token with `issues:write` permission (use the default `${{ secrets.GITHUB_TOKEN }}`).'
    required: true
  diff-path:
    description: 'Path to the semantic diff JSON generated by the APX CLI.'
    required: false
    default: '.apx/semantic_diff.json'
  fail-on-security:
    description: 'If true, the action fails when a high/critical security drift is detected.'
    required: false
    default: 'false'

outputs:
  labels-applied:
    description: 'Comma-separated list of labels that were added to the pull request.'
  law:
    description: 'The evolvable software law enforced by this action (always `1`).'
  security-alert:
    description: 'Whether a high/critical security drift was detected.'

runs:
  using: 'node20'
  main: 'dist/index.js'

